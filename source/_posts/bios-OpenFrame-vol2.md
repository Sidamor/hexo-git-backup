---
title: bios-开放框架-II
date: 2019-02-18 09:51:12
categories: 
- bios
tags:
- bios
- openframe
---

上一篇调研的记录有点凌乱，另开一篇进行整理。

<!--more-->

# 简要总结
在整个开放框架中，存在三个角色：开放框架、服务提供商、消费者。

明确一下三个角色分别要做什么。

## 开放框架要做什么

* 服务配置页面，服务提供商将自己的服务公布在开放框架
* 用户注册页面，消费者需要在bios注册一个自己的账户
* 服务调用情况上报，维护一个消息队列，接收服务调用情况的上报

PS.以后可能还需要完善的

* 封装服务提供商搭建服务的API类库
* 封装消费者调用服务的API类库
* 封装服务调用情况上报的类库
* 服务是否可用的检测

## 服务提供商要做什么

* 服务搭建
* 在bios注册自己的服务
* 对于用户调用进行鉴权
* 上报服务调用情况

## 消费者要做什么

* 在bios注册，获取调用服务权限
* 在bios获取服务列表
* 调用服务

![brief](brief.jpg)

# 详细说明

针对之前介绍到的功能：服务注册、用户注册、获取服务列表、调用服务、上报服务调用，作一个详细说明。

## 服务注册
服务提供商根据物模型规范填写服务详情（Json格式），提交到开放平台。
这一流程考虑在开放平台形成注册页面，填写相应字段，由平台生成json格式服务定义。

<center>产品注册页面</center>
![产品注册页面](product.png)


<center>属性注册页面</center>
![属性注册页面](property.png)


<center>服务注册页面</center>
![服务注册页面](service.png)

<center>事件注册页面</center>
![事件注册页面](event.png)


## 用户注册
用户注册，获取UserKey，UserSecret，用于调用服务时的鉴权


## 获取服务列表
用户从开放平台获取已注册服务列表，这里应该对于服务提供商，以及下属服务有一个层级划分，便于用户查看。


## 调用服务  
用户根据服务列表的请求地址，发起服务调用请求（附带鉴权信息）；
服务根据开放平台提供的鉴权接口进行权限认证；


## 上报服务调用
在提供服务后，上报服务调用信息（用户、服务详情、调用结果）